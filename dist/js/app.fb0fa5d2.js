(function(t){function e(e){for(var s,a,r=e[0],c=e[1],l=e[2],d=0,h=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&h.push(n[a][0]),n[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],s=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(s=!1)}s&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var s={},n={app:0},o=[];function a(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=s,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var s=i("85ec"),n=i.n(s);n.a},1175:function(t,e,i){"use strict";var s=i("a038"),n=i.n(s);n.a},"15cf":function(t,e,i){},"1a3c":function(t,e,i){"use strict";var s=i("cdf4"),n=i.n(s);n.a},"1d6c":function(t,e,i){"use strict";var s=i("3ee2"),n=i.n(s);n.a},"3ee2":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[t.modalConfig.show?i("Modal",{attrs:{config:t.modalConfig},on:{"modal-callback":t.modalCallback}}):t._e(),i("transition",{attrs:{name:"fade",mode:"out-in"}},[i("router-view",{attrs:{notes:t.notes},on:{"remove-note":t.removeNote,"create-note":t.createNote,"save-note":t.saveNote}})],1)],1)},o=[],a=(i("4de4"),i("d81d"),i("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"overflow"},[i("div",{staticClass:"modal"},[t._m(0),i("div",{staticClass:"body"},[i("h2",[t._v(t._s(t.config.text))]),i("a",{staticClass:"accept",attrs:{href:"#"},on:{click:function(e){return t.$emit("modal-callback")}}}),i("a",{staticClass:"decline",attrs:{href:"#"},on:{click:function(e){t.config.show=!1}}})]),i("div",[i("h6",[t._v(t._s(t.config.warning))])])])])}),r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h5",[t._v("Необходимо подтверждение")])])}],c={name:"Modal",props:["config","modal-callback"]},l=c,u=(i("1175"),i("2877")),d=Object(u["a"])(l,a,r,!1,null,"32e7996a",null),h=d.exports,m={name:"app",data:function(){return{modalConfig:{},notes:localStorage.notes?JSON.parse(localStorage.notes):[{id:1,title:"Список дел на вчера",tasks:[{id:1,title:"Дело №1",isComplete:!1},{id:2,title:"Дело №2",isComplete:!1},{id:3,title:"Дело №3",isComplete:!1},{id:4,title:"Дело №4",isComplete:!0},{id:5,title:"Дело №5",isComplete:!1},{id:6,title:"Дело №6",isComplete:!1},{id:7,title:"Дело №7",isComplete:!1}]},{id:2,title:"Список дел на сегодня",tasks:[{id:1,title:"Дело №1",isComplete:!0},{id:2,title:"Дело №2",isComplete:!0},{id:3,title:"Дело №3",isComplete:!0},{id:4,title:"Дело №4",isComplete:!0},{id:5,title:"Дело №5",isComplete:!1}]},{id:3,title:"Список дел на завтра",tasks:[{id:1,title:"Дело №1",isComplete:!0},{id:2,title:"Дело №2",isComplete:!1},{id:3,title:"Дело №3",isComplete:!1}]},{id:4,title:"Список дел на следующую неделю",tasks:[{id:1,title:"Дело №1",isComplete:!0},{id:2,title:"Дело №2",isComplete:!1},{id:3,title:"Дело №3",isComplete:!1},{id:4,title:"Дело №4",isComplete:!0},{id:5,title:"Дело №5",isComplete:!1}]},{id:5,title:"Список дел на ближайшие пять лет",tasks:[{id:1,title:"Дело №1",isComplete:!0},{id:2,title:"Дело №2",isComplete:!1},{id:3,title:"Дело №3",isComplete:!1},{id:4,title:"Дело №4",isComplete:!1},{id:5,title:"Дело №5",isComplete:!1}]}]}},components:{Modal:h},methods:{modalCallback:function(){},createNote:function(){var t=this.notes.length>0?this.notes[this.notes.length-1].id+1:1;this.notes.push({id:t,title:"Новая заметка #"+t,tasks:[]}),this.$router.push({name:"NoteEditor",params:{id:t}})},removeNote:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i?("Home"!==this.$route.name&&this.$router.push({name:"Home"}),this.notes=this.notes.filter((function(e){return e.id!==t})),this.saveNotesToStorage()):(this.modalCallback=function(){e.removeNote(t,!0),e.modalConfig.show=!1},this.modalConfig={text:"Вы уверены, что хотите удалить заметку?",warning:"Заметка удалится безвозвратно",show:!0})},saveNote:function(t){this.notes=this.notes.map((function(e){return e.id===t.id?t:e})),this.saveNotesToStorage()},saveNotesToStorage:function(){localStorage.notes=JSON.stringify(this.notes)}}},p=m,f=(i("034f"),Object(u["a"])(p,n,o,!1,null,null,null)),v=f.exports,k=i("8c4f"),g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("h2",[t._v("Все заметки")]),i("div",{staticClass:"create-new",on:{click:function(e){return t.$emit("create-note")}}}),t.notes.length?t._e():i("h2",{staticClass:"empty"},[t._v(" Пока не создано ни одной заметки! ")]),t._l(t.notes,(function(e){return i("Note",{key:e.id,attrs:{preview:!0,note:e},on:{"remove-note":function(i){return t.$emit("remove-note",e.id)}}})})),i("div",{staticClass:"flex-fillers note"}),i("div",{staticClass:"flex-fillers note"}),i("div",{staticClass:"flex-fillers note"})],2)},C=[],b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"note",class:{preview:t.preview}},[i("div",{staticClass:"panel",attrs:{title:t.note.title}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.note.title,expression:"note.title"}],staticClass:"note-title",attrs:{type:"text",disabled:t.preview},domProps:{value:t.note.title},on:{focus:function(e){return t.renameNote("before")},blur:function(e){return t.renameNote("after")},input:function(e){e.target.composing||t.$set(t.note,"title",e.target.value)}}}),t.preview?i("router-link",{attrs:{to:{name:"NoteEditor",params:{id:t.note.id}}}},[i("button",{staticClass:"edit",attrs:{title:"Редактировать заметку"}},[i("i",{staticClass:"edit-note-button"})])]):t._e(),i("button",{staticClass:"remove",attrs:{title:"Удалить заметку"},on:{click:t.removeNote}},[i("i",{staticClass:"remove-note-button"})])],1),i("TaskList",{attrs:{tasks:t.note.tasks,preview:t.preview},on:{"remove-task":t.removeTask,"create-task":function(e){return t.$emit("create-task")},"register-state":function(e){return t.$emit("register-state")},"drop-last-state":function(e){return t.$emit("drop-last-state")},"complete-task":t.completeTask}})],1)},_=[],w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"task-list"},[t.preview?t._e():i("button",{staticClass:"create-task-button",on:{click:function(e){return t.$emit("create-task")}}},[t._v(" Добавить задачу ")]),t._l(t.preview?t.tasks.slice(0,5):t.tasks,(function(e){return i("TaskItem",{key:e.id,attrs:{task:e,preview:t.preview},on:{"remove-task":t.removeTask,"register-state":function(e){return t.$emit("register-state")},"drop-last-state":function(e){return t.$emit("drop-last-state")},"complete-task":t.completeTask}})})),0==t.tasks.length?i("span",{staticClass:"no-tasks"},[t._v("Список дел пуст!")]):t._e()],2)},x=[],$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"taskitem",class:{completed:t.isComplete}},[t.preview?t._e():i("button",{on:{click:function(e){return t.$emit("remove-task",t.task_id)}}},[i("i",{staticClass:"remove-task-img"})]),t.editMode?t._e():i("span",{attrs:{title:t.task.title},on:{click:t.switchMode}},[t._v(t._s(t.task.title))]),t.editMode&&!t.preview?i("input",{directives:[{name:"model",rawName:"v-model",value:t.task.title,expression:"task.title"}],ref:"task-editor",attrs:{type:"text"},domProps:{value:t.task.title},on:{blur:t.switchMode,input:function(e){e.target.composing||t.$set(t.task,"title",e.target.value)}}}):t._e(),t.preview?t._e():i("input",{directives:[{name:"model",rawName:"v-model",value:t.isComplete,expression:"isComplete"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isComplete)?t._i(t.isComplete,null)>-1:t.isComplete},on:{change:[function(e){var i=t.isComplete,s=e.target,n=!!s.checked;if(Array.isArray(i)){var o=null,a=t._i(i,o);s.checked?a<0&&(t.isComplete=i.concat([o])):a>-1&&(t.isComplete=i.slice(0,a).concat(i.slice(a+1)))}else t.isComplete=n},t.completeTask]}})])},S=[],y={props:["task","preview"],data:function(){return{task_id:this.task.id,editMode:!1,lastTitle:this.task.title}},methods:{switchMode:function(){var t=this;this.editMode=!this.editMode&&!this.preview,this.editMode?this.$nextTick((function(){t.$emit("register-state"),t.$refs["task-editor"].focus()})):this.lastTitle===this.task.title?this.$emit("drop-last-state"):this.lastTitle=this.task.title},completeTask:function(){this.$emit("register-state"),this.task.isComplete=!this.task.isComplete,this.$emit("complete-task",this.task.id,this.isComplete)}},computed:{isComplete:{get:function(){return this.task.isComplete},set:function(){this.task.isComplete=!this.task.isComplete}}}},T=y,N=(i("ea37"),Object(u["a"])(T,$,S,!1,null,"45cf9601",null)),O=N.exports,I={props:["tasks","preview"],components:{TaskItem:O},methods:{removeTask:function(t){this.$emit("remove-task",t)},completeTask:function(t,e){this.$emit("complete-task",{task_id:t,status:e})}},created:function(){}},j=I,M=(i("8fad"),Object(u["a"])(j,w,x,!1,null,"6ef4f717",null)),A=M.exports,E={props:["note","preview"],components:{TaskList:A},methods:{removeTask:function(t){this.$emit("remove-task",t)},renameNote:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"before";"before"===t&&this.$emit("register-state"),"after"===t&&(this.note.title===this.previousTitle?this.$emit("drop-last-state"):this.previousTitle=this.note.title)},removeNote:function(){this.$emit("remove-note",this.note.id)},completeTask:function(t){t.note_id=this.note.id,this.$emit("complete-task",t)}},computed:{previousTitle:{get:function(){return this.title},set:function(t){this.title=t}}},created:function(){this.previousTitle=this.note.title}},P=E,H=(i("1a3c"),Object(u["a"])(P,b,_,!1,null,"ca930e00",null)),J=H.exports,L={name:"Home",props:["notes"],components:{Note:J}},q=L,z=(i("1d6c"),Object(u["a"])(q,g,C,!1,null,"e10b5c54",null)),B=z.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.note?i("div",{ref:"editor-container",staticClass:"editor-container"},[i("h2",[t._v("Редактирование заметки")]),i("div",{staticClass:"note-panel"},[i("Note",{attrs:{note:t.note},on:{"remove-note":function(e){return t.$emit("remove-note",t.note.id)},"remove-task":t.removeTask,"create-task":t.createTask,"register-state":function(e){return t.doAction("register")},"drop-last-state":function(e){return t.doAction("dropLastState")}}})],1),i("div",{ref:"actions-panel",staticClass:"actions-panel"},[i("a",{staticClass:"action__undo",attrs:{title:"Отменить изменение"},on:{click:function(e){return t.doAction("undo")}}}),i("a",{staticClass:"action__redo",attrs:{title:"Повторить изменение"},on:{click:function(e){return t.doAction("redo")}}}),i("a",{staticClass:"action__save",class:{unsaved:t.changeIndex>0},attrs:{title:"Сохранить"},on:{click:function(e){return t.doAction("save")}}}),i("router-link",{staticClass:"action__home",attrs:{to:{name:"Home"},title:0===t.changeIndex?"На главную":"Отменить редактирование"}}),i("div",{staticClass:"freespace"})],1)]):t._e()},F=[],G=(i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0"),{name:"NoteEditor",components:{Note:J},props:["notes","removeNote"],data:function(){var t=!0,e=!1,i=void 0;try{for(var s,n=this.notes[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var o=s.value;if(o.id==this.$route.params.id)return{note:o,changeStack:[],changeIndex:0}}}catch(a){e=!0,i=a}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}return{note:"",changeStack:[],changeIndex:0}},methods:{doAction:function(t){var e=this;switch(t){case"undo":this.changeIndex>0&&(this.note=this.changeStack[--this.changeIndex]);break;case"redo":this.changeIndex<this.changeStack.length-1&&(this.note=this.changeStack[++this.changeIndex]);break;case"register":this.$set(this.changeStack,this.changeStack.length,JSON.parse(JSON.stringify(this.note))),this.changeIndex=this.changeStack.length-1,this.note=this.changeStack[this.changeIndex];break;case"save":this.changeStack=this.changeStack.filter((function(t,i){return i===e.changeIndex})),this.changeIndex=0,this.note=this.changeStack[this.changeIndex],this.$emit("save-note",this.note);break;case"exit-wo-saving":this.note=this.changeStack[0],this.$router.push({name:"Home"});break;case"dropLastState":0!==this.changeIndex&&this.changeIndex!==this.changeStack.length-1?this.changeStack.pop():this.changeIndex===this.changeStack.length-1&&(this.note=this.changeStack[--this.changeIndex],this.changeStack.pop())}},removeTask:function(t){this.doAction("register"),this.note=this.changeStack[this.changeIndex],this.note.tasks=this.note.tasks.filter((function(e){return e.id!=t}))},createTask:function(){this.doAction("register"),this.note=this.changeStack[this.changeIndex];var t=this.note.tasks.length>0?this.note.tasks[this.note.tasks.length-1].id+1:1;this.note.tasks.push({id:t,title:"Новая задача #"+t,isComplete:!1})}},created:function(){this.note?this.doAction("register"):this.$router.push({name:"Home"})}}),K=G,Q=(i("fdb5"),Object(u["a"])(K,D,F,!1,null,"2f0d05a3",null)),R=Q.exports;s["a"].use(k["a"]);var U=[{path:"/",name:"Home",component:B},{path:"/note/:id",name:"NoteEditor",component:R}],V=new k["a"]({routes:U,mode:"history"}),W=V;s["a"].config.productionTip=!1,new s["a"]({router:W,render:function(t){return t(v)}}).$mount("#app")},"5f1f":function(t,e,i){},"85ec":function(t,e,i){},"8fad":function(t,e,i){"use strict";var s=i("91ef"),n=i.n(s);n.a},"91ef":function(t,e,i){},a038:function(t,e,i){},cdf4:function(t,e,i){},ea37:function(t,e,i){"use strict";var s=i("15cf"),n=i.n(s);n.a},fdb5:function(t,e,i){"use strict";var s=i("5f1f"),n=i.n(s);n.a}});
//# sourceMappingURL=app.fb0fa5d2.js.map